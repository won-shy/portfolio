document.currentScript.setAttribute('data-nitro-for-id', 'templatelab-main-js-js');
"use strict";!function(s){function t(){var e=sessionStorage.getItem("apiEndpoint"),t=localStorage.getItem("userDataRefreshDate");if(null!==window.localStorage.getItem("userData")&&null!==e&&""!==window.localStorage.getItem("userData")){if(null!==t)try{var a=new Date(t);if(a.setDate(a.getDate()+1),a>new Date)return}catch(e){console.log("Unable to parse user data refresh date")}try{var o=JSON.parse(window.localStorage.getItem("userData")).auth_token,s=e+"/user/subscriptions";fetch(e+"/users/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer"+o}}).then(function(e){if(localStorage.setItem("userDataRefreshDate",new Date),401===e.status)return localStorage.removeItem("userData"),localStorage.setItem("isLoggedIn",!1),localStorage.setItem("hasActiveSubscription",!1),void localStorage.removeItem("userDataRefreshDate");e.json().then(function(e){if(e.success){if("admin"===e.user_data.role)return void localStorage.setItem("hasActiveSubscription",!0);fetch(s,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer"+o}}).then(function(e){return e.status,e.json()}).then(function(e){e.success&&function(e){for(var t=!1,a=0;a<e.length;a++)"trialing"!==e[a].stripe_status&&"active"!==e[a].stripe_status||(t=!0);localStorage.setItem("hasActiveSubscription",t)}(e.subscriptions)}).catch(function(e){console.log(e)})}})}).catch(function(e){console.log(e)})}catch(e){console.log("Unable to update user data")}}else localStorage.setItem("hasActiveSubscription",!1)}s(document).ready(function(){s(".header .header__hamburger").on("click",function(){s(".header").toggleClass("menu-opened"),s(this).toggleClass("active"),s("body").toggleClass("overflow")}),s(".header .header__nav-main a i").on("click",function(e){s(".header__hamburger").hasClass("active")&&!s(this).closest("ul").hasClass("sub-menu")&&e.preventDefault(),s(this).closest("li").toggleClass("active")}),s(".header .form-search .btn.desktop-submit").on("click",function(e){e.preventDefault(),s("#search-full-screen").addClass("open"),s('#search-full-screen > form > input[type="search"]').focus()}),s("#search-full-screen, #search-full-screen button.close").on("click keyup",function(e){e.target!=this&&"close"!=e.target.className&&27!=e.keyCode||s(this).removeClass("open")});var e=s(".projects-tabs .nav-link");s(".projects-tabs .nav-link").on("click",function(){e.removeClass("active")}),s(".block-projects .owl-carousel").owlCarousel({loop:!1,margin:15,nav:!0,dots:!1,lazyLoadEager:1,responsive:{0:{items:1},500:{items:2,margin:10},992:{items:3},1e3:{items:6}}}),s(".block-articles .owl-carousel").owlCarousel({loop:!1,margin:23,nav:!0,dots:!1,lazyLoad:!0,lazyLoadEager:1,navText:['<i class="far fa-angle-double-left"></i>','<i class="far fa-angle-double-right"></i>'],responsive:{0:{items:1},768:{items:2},1440:{items:3}}}),window.trackPopupDownload=function(e){var t=(s=window.jQuery)(e).attr("title");gtag("event","Download",{event_category:t})},window.voteForTemplate=function(e,t,a){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;o=localStorage.getItem("template_vote_"+e)?null==o?"You have already voted for this template":o:(gtag("event","Vote",{event_category:t,event_label:0<a?"Upvote":"Downvote",value:a}),localStorage.setItem("template_vote_"+e,!0),null==o?"Thank you for your feedback":o),s("#template-votes-"+e).text(o)},function(){if(null===sessionStorage.getItem("apiEndpoint")){var e="https://api.templatelab.com/api";-1!==window.location.hostname.indexOf("dev.")&&(e="http://api-dev.templatelab.com/api"),-1!==window.location.hostname.indexOf("staging.")&&(e="https://api-staging.templatelab.com/api"),sessionStorage.setItem("apiEndpoint",e)}}(),t()})}(jQuery);;
